<%- include('../partials/top.ejs') %>
<div class="login_container py-5 vh-100 bg-body-secondary d-flex justify-content-center align-items-center">
  <form action="/signup" onsubmit="handleSubmit()" method="post" class="border border-2 shadow-sm bg-white d-flex gap-3 flex-column rounded-4 p-4" style="min-width: 380px">
    <h3 class="text-center mt-5">Signup</h3>
    <p class="text-center text-warning"><% if(locals.message){ %> <%= message %> <% } %></p>
    <input class="rounded-2 border py-2 ps-2" id="uname" name="username" type="text" placeholder="Enter your username" />
    <div id="show1" class="text-danger"></div>
    <input class="rounded-2 border py-2 ps-2" id="email" name="email" type="email" placeholder="Enter your email" />
    <div id="show2" class="text-danger"></div>
    <input class="rounded-2 border py-2 ps-2" name="password" id="p1" type="password" placeholder="Enter your password" />
    <div id="show3" class="text-danger"></div>
    <input class="rounded-2 border py-2 ps-2" name="password2" id="p2" type="password" placeholder="Confirm your password " />
    <div id="show4" class="text-danger"></div>
    <button class="border-0 mb-5 text-white py-2 px-5 bg-danger rounded-4" type="submit">Login</button>
  </form>
</div>
<%- include('../partials/bottom.ejs') %>

<script>
  let show=document.getElementById("show1");

  function handleSubmit(){
      let username=document.getElementById("uname").value;
      let email=document.getElementById("email").value;
      let password1=document.getElementsByName("p1").value;
      let password2=document.getElementsByName("p2").value;
      if(username.trim()==""){
          document.getElementById("show1").innerHTML="Username can't be empty";
        return false;
      }
     let emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!email.match(emailRegex)) {
        document.getElementById("show2").innerHTML = "Please enter a valid email address";
        return false;
      }
      if(password1.trim()=""){
        document.getElementById("show3").innerHTML="Passwords can't be empty";
        return false;
      }
      if(password2.trim()=""){
        document.getElementById("show4").innerHTML="Passwords can't be empty";
        return false;
      }
      if(password1!=password2){
        document.getElementById("show4").innerHTML="Passwords doesn't match";
        return false;
      }


  }
</script>
